<div class="container mx-auto px-4 sm:px-6 lg:px-8">
  <h1 class="text-3xl font-bold mb-6 text-center sm:text-left">My Clients</h1>

  <div id="clientsContainer" class="overflow-x-auto">
    <table class="table w-full">
      <thead>
        <tr>
          <th class="px-4 py-2">Name</th>
          <th class="px-4 py-2 hidden sm:table-cell">Email</th>
          <th class="px-4 py-2 hidden md:table-cell">Phone</th>
          <th class="px-4 py-2 hidden lg:table-cell">City</th>
          <th class="px-4 py-2">Status</th>
          <th class="px-4 py-2">Actions</th>
        </tr>
      </thead>
      <tbody id="clientsTableBody">
        <!-- Client data will be populated here -->
      </tbody>
    </table>
  </div>
  <p id="noClientsMessage" class="text-lg text-center mt-4" style="display: none;">No clients found. Add your first client to get started!</p>

  <script>
    async function fetchClients() {
      try {
        const response = await fetch('/dashboard/clients/all', {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${localStorage.getItem('authToken')}`,
            'Content-Type': 'application/json'
          }
        });
        if (!response.ok) {
          throw new Error('Failed to fetch clients');
        }
        const clients = await response.json();
        displayClients(clients);
      } catch (error) {
        console.error('Error fetching clients:', error);
      }
    }

    function displayClients(clients) {
      const tableBody = document.getElementById('clientsTableBody');
      const noClientsMessage = document.getElementById('noClientsMessage');
      const clientsContainer = document.getElementById('clientsContainer');

      if (clients && clients.length > 0) {
        tableBody.innerHTML = clients.map(client => `
                <tr>
                    <td class="px-4 py-2">${client.name}</td>
                    <td class="px-4 py-2 hidden sm:table-cell">${client.email}</td>
                    <td class="px-4 py-2 hidden md:table-cell">${client.phone}</td>
                    <td class="px-4 py-2 hidden lg:table-cell">${client.city}</td>
                    <td class="px-4 py-2">${client.status}</td>
                    <td class="px-4 py-2">
                        <div class="flex flex-col sm:flex-row gap-2">
                          <a href="/dashboard/clients/view/${client.id}" class="btn btn-sm btn-primary w-full sm:w-auto">
                            Edit / Delete
                          </a>
                        </div>
                    </td>
                </tr>
            `).join('');
        clientsContainer.style.display = 'block';
        noClientsMessage.style.display = 'none';
      } else {
        clientsContainer.style.display = 'none';
        noClientsMessage.style.display = 'block';
      }
    }

    document.addEventListener('DOMContentLoaded', fetchClients);
  </script>

  <div class="mt-6 text-center sm:text-left">
    <a href="/dashboard/clients/new" class="btn btn-primary w-full sm:w-auto">Add New Client</a>
  </div>
</div>