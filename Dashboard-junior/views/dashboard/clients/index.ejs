<div class="container mx-auto px-4">
    <h1 class="text-3xl font-bold mb-6">My Clients</h1>

    <div id="clientsContainer" class="overflow-x-auto">
        <table class="table w-full">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>City</th>
                    <th>State</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="clientsTableBody">
                <!-- Client data will be populated here -->
            </tbody>
        </table>
    </div>
    <p id="noClientsMessage" class="text-lg" style="display: none;">No clients found. Add your first client to get started!</p>

    <script>
    async function fetchClients() {
        try {
            const response = await fetch('/dashboard/clients', {
                headers: {
                    'Authorization': `Bearer ${localStorage.getItem('authToken')}`
                }
            });
            if (!response.ok) {
                throw new Error('Failed to fetch clients');
            }
            const clients = await response.json();
            displayClients(clients);
        } catch (error) {
            console.error('Error fetching clients:', error);
        }
    }

    function displayClients(clients) {
        const tableBody = document.getElementById('clientsTableBody');
        const noClientsMessage = document.getElementById('noClientsMessage');
        const clientsContainer = document.getElementById('clientsContainer');

        if (clients && clients.length > 0) {
            tableBody.innerHTML = clients.map(client => `
                <tr>
                    <td>${client.name}</td>
                    <td>${client.email}</td>
                    <td>${client.phone}</td>
                    <td>${client.city}</td>
                    <td>${client.state}</td>
                    <td>
                        <a href="/dashboard/clients/${client.id}" class="btn btn-sm btn-primary">View</a>
                        <a href="/dashboard/clients/${client.id}/edit" class="btn btn-sm btn-secondary">Edit</a>
                    </td>
                </tr>
            `).join('');
            clientsContainer.style.display = 'block';
            noClientsMessage.style.display = 'none';
        } else {
            clientsContainer.style.display = 'none';
            noClientsMessage.style.display = 'block';
        }
    }

    document.addEventListener('DOMContentLoaded', fetchClients);
    </script>

    <div class="mt-6">
        <a href="/dashboard/clients/new" class="btn btn-primary">Add New Client</a>
    </div>
</div>

